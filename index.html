<!doctype html>
<html lang="ko">

<head>
  <meta charset="utf-8">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="프로세스 스케줄러 시뮬레이터">
  <meta name="theme-color" content="#eabafa">
  <title>thanOS 프로세스 스케줄러</title>

  <!-- jQuery 3.3.1 -->
  <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
  <!-- Bootstrap 3.3.7 -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">

  <link rel="stylesheet" href="css/main.css">

</head>

<body>

<div class="container">
  <!--[if IE]>
  <p class="browserupgrade"><strong>오래된</strong> 브라우저를 사용하고 계시네요. 브라우저를 <a href="https://browsehappy.com/">업데이트</a>해 주세요.</p>
  <![endif]-->

  <div class="row">
    <div class="col-md-6 col-md-offset-3">
      <div class="panel panel-default">
        <div class="panel-body">
          <h1>thanOS</h1>
          <h3>프로세스 스케줄러</h3>
        </div>
      </div>
      <form class="form">
        <div class="panel panel-default">
          <div class="panel-body">
            <div class="form-group" id="group-technique">
              <label class="radio control-label">스케줄링 기법</label>
              <div class="radio-inline">
                <label>
                  <input type="radio" name="technique" value="FCFS" required>
                  FCFS
                </label>
              </div>
              <div class="radio-inline">
                <label>
                  <input type="radio" name="technique" value="RR" required>
                  RR
                </label>
              </div>
              <div class="radio-inline">
                <label>
                  <input type="radio" name="technique" value="SPN" required>
                  SPN
                </label>
              </div>
              <div class="radio-inline">
                <label>
                  <input type="radio" name="technique" value="SRTN" required>
                  SRTN
                </label>
              </div>
              <div class="radio-inline">
                <label>
                  <input type="radio" name="technique" value="HRRN" required>
                  HRRN
                </label>
              </div>
              <div class="radio-inline">
                <label>
                  <input type="radio" name="technique" value="???" required>
                  ???
                </label>
              </div>
            </div>
            <div class="form-group">
              <label>프로세스</label>
              <div class="panel panel-default" id="process-panel-1">
                <div class="panel-body">
                  <label for="process-1">P1</label>
                  <div class="form-inline" id="process-1">
                    <label for="arrival">도착 시간</label>
                    <input type="number" min="0" class="form-control" id="arrival" required>
                    <br />
                    <label for="burst">수행 시간</label>
                    <input type="number" min="1" class="form-control" id="burst" required>
                  </div>
                </div>
              </div>
            </div>
            <div class="form-group right">
              <button type="button" class="btn btn-primary" id="add-process">추가</button>
            </div>
          </div>
        </div>
        <div class="panel panel-default">
          <div class="panel-body">
            <div class="form-group form-inline">
            </div>
            <div class="form-group">
            </div>
          </div>
        </div>
        <div class="panel panel-default">
          <div class="panel-body">
            <button type="submit" class="btn btn-primary btn-block">실행</button>
          </div>
        </div>
      </form>
    </div>
  </div>
</div>

<!-- Bootstrap 3.3.7 -->
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<script type="text/javascript">
  $(function() {  // 페이지 로드 완료 후 스크립트 로드
    let isRR = false;
    let cntProcess = 1;

    // 프로세스 기법 라디오 버튼 이벤트
    $("input[type=radio][name=technique]").change(function() {
      let val = $("input[type=radio][name=technique]:checked").val();
      if (val === "RR" && !isRR) {
        isRR = true;
        $("#group-technique").after(`
          <div class="form-inline" id="delta">
            <label for="delta">δ (Time Quantum)</label>
            <input type="text" class="form-control" id="delta" required>
          </div>
        `);
      }
      else if (isRR) {
        isRR = false;
        $("#delta").remove();
      }
    });

    // 프로세스 추가 버튼 이벤트
    $("#add-process").click(function() {
      if (cntProcess === 1) {
        $("#add-process").before(`
          <button type="button" class="btn btn-primary" id="remove-process">삭제</button>
        `);
        // 프로세스 삭제 버튼 이벤트
        $("#remove-process")[0].addEventListener("click", function() {
          $(`#process-panel-${cntProcess}`).remove();
          --cntProcess;
          if (cntProcess <= 1) {
            $("#remove-process").remove();
          }
        });
      }
      $(`#process-panel-${cntProcess++}`).after(`
        <div class="panel panel-default" id="process-panel-${cntProcess}">
          <div class="panel-body">
            <label for="process-${cntProcess}">P${cntProcess}</label>
            <div class="form-inline" id="process-${cntProcess}">
            <label for="arrival">도착 시간</label>
              <input type="number" min="0" class="form-control" id="arrival" required>
              <br />
              <label for="burst">수행 시간</label>
              <input type="number" min="1" class="form-control" id="burst" required>
            </div>
          </div>
        </div>
      `);
      console.log(cntProcess);
    });
  });
</script>

</body>

</html>
